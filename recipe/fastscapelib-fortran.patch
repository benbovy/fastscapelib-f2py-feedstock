diff --git a/CMakeLists.txt b/CMakeLists.txt
index 1540617..d85f286 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -134,9 +134,10 @@ if(SKBUILD)
   # TODO: remove when https://github.com/scikit-build/scikit-build/pull/495 is merged
   set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake/" ${CMAKE_MODULE_PATH})

+  find_package(PythonLibs REQUIRED)
+  find_package(PythonExtensions REQUIRED)
   find_package(NumPy REQUIRED)
   find_package(F2PY REQUIRED)
-  find_package(PythonExtensions REQUIRED)

   set(F2PY_MODULE_NAME "_fastscapelib_fortran")

@@ -145,6 +146,16 @@ if(SKBUILD)
     INCLUDE_DIRECTORIES ${FASTSCAPELIB_SRC_DIR}
     )

+  if (UNIX)
+    if (APPLE)
+      set_target_properties(${F2PY_MODULE_NAME} PROPERTIES
+        LINK_FLAGS  '-Wl,-dylib,-undefined,dynamic_lookup')
+    else()
+      set_target_properties(${F2PY_MODULE_NAME} PROPERTIES
+        LINK_FLAGS  '-Wl,--allow-shlib-undefined')
+    endif()
+  endif()
+
   python_extension_module(${F2PY_MODULE_NAME})

   install(
diff --git a/cmake/FindF2PY.cmake b/cmake/FindF2PY.cmake
index 5fa39a9..c9b4641 100644
--- a/cmake/FindF2PY.cmake
+++ b/cmake/FindF2PY.cmake
@@ -68,12 +68,18 @@

 find_program(F2PY_EXECUTABLE NAMES f2py${PYTHON_VERSION_MAJOR} f2py)

+message(STATUS "find f2py program results: ${F2PY_EXECUTABLE}")
+
 # XXX This is required to support NumPy < v0.15.0. See note in module documentation above.
 if(NOT F2PY_EXECUTABLE)
   find_package(NumPy)
   set(F2PY_EXECUTABLE "${PYTHON_EXECUTABLE}" "-m" "numpy.f2py.__main__")
+  message(STATUS "find f2py via numpy python exec: ${PYTHON_EXECUTABLE}")
+  message(STATUS "find f2py via numpy results: ${F2PY_EXECUTABLE}")
 endif()

+message(STATUS "f2py_include_dir results: ${F2PY_INCLUDE_DIR}")
+
 if(NOT F2PY_INCLUDE_DIR)
   execute_process(
       COMMAND "${PYTHON_EXECUTABLE}"
@@ -85,6 +91,7 @@ if(NOT F2PY_INCLUDE_DIR)
   string(REPLACE "\\" "/" _f2py_directory ${_f2py_directory})

   set(F2PY_INCLUDE_DIR "${_f2py_directory}/src" CACHE STRING "F2PY source directory location" FORCE)
+  message(STATUS "f2py_include_dir results: ${F2PY_INCLUDE_DIR}")
 endif()

 # Set-up the F2PY libraries and include directories
@@ -112,6 +119,8 @@ if(F2PY_EXECUTABLE)
   endif()
 endif()

+message(STATUS "f2py version results: ${F2PY_VERSION_STRING}")
+
 # handle the QUIETLY and REQUIRED arguments and set F2PY_FOUND to TRUE if
 # all listed variables are TRUE
 include(FindPackageHandleStandardArgs)
diff --git a/pyproject.toml b/pyproject.toml
index 470bf86..0dc6bb9 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -1,2 +1,3 @@
 [build-system]
 requires = ["setuptools", "wheel", "scikit-build", "cmake", "ninja", "numpy"]
+build-backend = "setuptools.build_meta"
